<h1 class="text-3xl font-bold mb-6"><%= user ? 'Modifier l\'Utilisateur' : 'Créer un Utilisateur' %></h1>

<form action="/admin/users<%= user ? '/' + user.uid : '' %>" method="POST" class="bg-white p-6 rounded-lg shadow-md">
    <div class="mb-4">
        <label for="email" class="block text-gray-700 text-sm font-bold mb-2">Email:</label>
        <input type="email" id="email" name="email" value="<%= user ? user.email : '' %>" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
    </div>

    <div class="mb-4">
        <label for="displayName" class="block text-gray-700 text-sm font-bold mb-2">Pseudo:</label>
        <input type="text" id="displayName" name="displayName" value="<%= user ? user.displayName : '' %>" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
    </div>

    <div class="mb-4">
        <label for="password" class="block text-gray-700 text-sm font-bold mb-2">Mot de passe (laisser vide pour ne pas changer):</label>
        <input type="password" id="password" name="password" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" <%= user ? '' : 'required' %>>
        <% if (!user) { %>
            <p class="text-xs text-gray-500 mt-1">Requis pour la création d'un nouvel utilisateur.</p>
        <% } %>
    </div>

    <div class="mb-4">
        <label for="level" class="block text-gray-700 text-sm font-bold mb-2">Niveau du joueur:</label>
        <select id="level" name="level" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
            <option value="Débutant" <%= user && user.level === 'Débutant' ? 'selected' : '' %>>Débutant</option>
            <option value="Intermédiaire" <%= user && user.level === 'Intermédiaire' ? 'selected' : '' %>>Intermédiaire</option>
            <option value="Confirmé" <%= user && user.level === 'Confirmé' ? 'selected' : '' %>>Confirmé</option>
        </select>
    </div>

    <div class="mb-6">
        <label for="role" class="block text-gray-700 text-sm font-bold mb-2">Rôle d'accès:</label>
        <select id="role" name="role" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
            <option value="player" <%= user && user.role === 'player' ? 'selected' : '' %>>Joueur</option>
            <option value="admin" <%= user && user.role === 'admin' ? 'selected' : '' %>>Administrateur</option>
        </select>
    </div>

    <div class="flex items-center justify-end">
        <a href="/admin/users" class="inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800 mr-4">
            Annuler
        </a>
        <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
            <%= user ? 'Mettre à jour' : 'Créer' %> l'Utilisateur
        </button>
    </div>
</form>
